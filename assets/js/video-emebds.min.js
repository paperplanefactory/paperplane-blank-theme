function add_video_platforms_apis(){if(load_vimeo){var e=document.createElement("link");e.rel="preconnect",e.href="https://player.vimeo.com",e.crossOrigin="anonymous",document.head.appendChild(e);var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",t.async=!0,firstScriptTag.parentNode.insertBefore(t,firstScriptTag)}if(load_youtube){var a=document.createElement("link");a.rel="preconnect",a.href="https://www.youtube.com",a.crossOrigin="anonymous",document.head.appendChild(a);t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",t.async=!0,firstScriptTag.parentNode.insertBefore(t,firstScriptTag)}}var firstScriptTag=document.getElementsByTagName("script")[0],load_youtube=!1,load_vimeo=!1;document.querySelectorAll(".play-video-js").forEach(function(e){var t=e.getAttribute("data-video-source");"vimeo"==t&&(load_vimeo=!0),"youtube"==t&&(load_youtube=!0)}),add_video_platforms_apis(),document.addEventListener("click",function(e){if(e.target.classList.contains("play-video-js")){var t=e.target.getAttribute("data-video-source"),a=e.target.getAttribute("data-video-toplay");if(fadeOut(e.target,300),"vimeo"==t){var o=document.getElementById(a),i=document.getElementById(a).getAttribute("data-src");i.includes("?")?i+="&autoplay=1&muted=1":i+="?autoplay=1&muted=1";var r=document.getElementById(a);r.removeAttribute("data-src"),r.setAttribute("src",i),r.setAttribute("aria-hidden","false");var n=new Vimeo.Player(o);document.addEventListener("click",function(e){e.target.matches(".modal-close-js")&&n.pause()},{once:!0})}if("youtube"==t){var d=e.target.getAttribute("data-youtube-video-id");document.getElementById(a).setAttribute("aria-hidden","false"),n=new YT.Player(a,{height:"360",width:"640",modestbranding:1,enablejsapi:1,videoId:d,playerVars:{autoplay:1,mute:1,controls:1,rel:0,playsinline:1},events:{onReady:function(e){e.target.playVideo()},onStateChange:function(e){e.data===YT.PlayerState.PLAYING&&console.log("Video in riproduzione")},onError:function(e){console.error("Errore YouTube:",e.data)}}}),document.addEventListener("click",function(e){e.target.matches(".modal-close-js")&&n&&"function"==typeof n.pauseVideo&&n.pauseVideo()},{once:!0})}if("upload-video"==t){var c=document.getElementById(a);c.play(),c.setAttribute("aria-hidden","false"),document.addEventListener("click",function(e){e.target.matches(".modal-close-js:not(.initialized)")&&c.pause()})}e.preventDefault()}});