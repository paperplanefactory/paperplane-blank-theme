const MenuUtils={setElementState:function(e,t,n="open"){if(e)return t?(e.classList.add(n),e.setAttribute('aria-expanded','true')):(e.classList.remove(n),e.setAttribute('aria-expanded','false')),t},updateNavigationHeights:function(){let e=0;document.querySelectorAll('.navigation-height-counter').forEach(t=>{const n=t.getBoundingClientRect();if(n.bottom>0){const t=n.top<0?n.bottom:n.height;e+=t}}),document.documentElement.style.setProperty('--header-height-real-time',`${e}px`),window.navigationElementsHeightStatic||(window.navigationElementsHeightStatic=e,document.documentElement.style.setProperty('--header-height-static',`${e}px`)),document.querySelectorAll('.mega-menu-js').forEach(t=>{t.style.top=e+'px'})}},MenuManager={SELECTORS:{MEGA_TRIGGER:'.mega-menu-js-trigger',MEGA_MENU:'.mega-menu-js',SUBMENU_DESKTOP:'.sub-menu-btn[data-menu-type="desktop"]',SUBMENU_MOBILE:'.sub-menu-btn[data-menu-type="mobile"]',SUBMENU:'.sub-menu',CLOSE_BTN:'.submenu-close-js',MENU_TRIGGER_ALL:'[data-menu-type="desktop"].mega-menu-js-trigger, [data-menu-type="desktop"].sub-menu-btn, [data-menu-type="mobile"].sub-menu-btn, .simple-link'},pressedKeys:new Set,lastScrollTop:0,menuStateCache:{hasOpenMegaMenu:!1,hasOpenDesktopSubMenu:!1,hasOpenMobileSubMenu:!1,isHamburgerOpen:!1},init:function(){this.setupHamburgerMenu(),this.setupMegaMenu(),this.setupSubMenus(this.SELECTORS.SUBMENU_DESKTOP,!1),this.setupSubMenus(this.SELECTORS.SUBMENU_MOBILE,!0),this.setupKeyboardHandlers(),this.setupMenuClosers(),this.setupExpandButton(),window.addEventListener('scroll',()=>this.scrollDirectionMenu()),window.addEventListener('resize',()=>MenuUtils.updateNavigationHeights()),MenuUtils.updateNavigationHeights(),this.updateMenuStateCache()},updateMenuStateCache:function(){this.menuStateCache.hasOpenMegaMenu=!!document.querySelector(this.SELECTORS.MEGA_MENU+':not(.hidden)'),this.menuStateCache.hasOpenDesktopSubMenu=!!document.querySelector(this.SELECTORS.SUBMENU_DESKTOP+'.clicked'),this.menuStateCache.hasOpenMobileSubMenu=!!document.querySelector(this.SELECTORS.SUBMENU_MOBILE+'.clicked'),this.menuStateCache.isHamburgerOpen=!!document.querySelector('#hamburger-button.open')},hasOpenMenus:function(){return this.menuStateCache.hasOpenMegaMenu||this.menuStateCache.hasOpenDesktopSubMenu||this.menuStateCache.hasOpenMobileSubMenu},closeOthers:function(e,t,n=null,s=!0){s&&document.querySelectorAll(e).forEach(e=>{if(e!==t&&e.classList.contains('clicked')&&(MenuUtils.setElementState(e,!1,'clicked'),n)){const t=e.parentElement.querySelector(n)||document.querySelector(`.mega-menu-js-${e.dataset.megamenuOpenId}-target`);t&&(t.classList.remove('visible'),t.classList.add('hidden'))}})},toggleHamburgerMenu:function(e=!1){const t=document.querySelector('#hamburger-button'),n=document.getElementById('head-overlay'),s=document.querySelector('.scroll-opportunity-overlay-js');let o=t.classList.contains('open');e&&(o=!0),MenuUtils.setElementState(t,!o,'open'),n.classList.toggle('hidden',o);const a=document.getElementById('header'),i=document.querySelector('body');return o?(a&&a.classList.remove('fixed'),i&&i.classList.remove('no-scroll')):(a&&a.classList.add('fixed'),i&&i.classList.add('no-scroll')),!o&&s&&(s.scrollTop=0),o?this.updateHeaderBackground():this.closeAllDesktopMenus(),this.updateMenuStateCache(),!o},closeHamburgerMenu:function(){return this.toggleHamburgerMenu(!0)},closeAllMenus:function(){document.querySelectorAll(this.SELECTORS.MEGA_MENU).forEach(e=>{e.classList.add('hidden')}),document.querySelectorAll(this.SELECTORS.MEGA_TRIGGER).forEach(e=>{MenuUtils.setElementState(e,!1,'clicked')}),document.querySelectorAll(this.SELECTORS.SUBMENU_DESKTOP).forEach(e=>{MenuUtils.setElementState(e,!1,'clicked')}),document.querySelectorAll(this.SELECTORS.SUBMENU_MOBILE).forEach(e=>{MenuUtils.setElementState(e,!1,'clicked')}),document.querySelectorAll(this.SELECTORS.SUBMENU).forEach(e=>{e.classList.remove('visible')}),document.querySelectorAll(this.SELECTORS.CLOSE_BTN).forEach(e=>{e.classList.remove('active')}),this.updateMenuStateCache(),this.updateHeaderBackground()},closeAllSubMenus:function(){this.closeAllMenus()},closeAllDesktopMenus:function(){this.closeAllMegaMenus(),this.closeAllStandardSubMenus()},closeAllMegaMenus:function(){document.querySelectorAll(this.SELECTORS.MEGA_MENU).forEach(e=>{e.classList.add('hidden')}),document.querySelectorAll(this.SELECTORS.MEGA_TRIGGER).forEach(e=>{MenuUtils.setElementState(e,!1,'clicked')}),this.updateMenuStateCache()},closeAllStandardSubMenus:function(){document.querySelectorAll(this.SELECTORS.SUBMENU_DESKTOP).forEach(e=>{MenuUtils.setElementState(e,!1,'clicked')}),document.querySelectorAll('.sub-menu[data-menu-type="desktop"]').forEach(e=>{e.classList.remove('visible')}),this.updateMenuStateCache()},setupHamburgerMenu:function(){const e=document.getElementById('hamburger-button');e&&e.addEventListener('click',()=>this.toggleHamburgerMenu());const t=document.querySelector('.overlay-navi-reset-js');t&&t.addEventListener('focusin',e=>{const t=document.querySelector('#hamburger-button');t&&t.focus(),e.preventDefault()})},setupMegaMenu:function(){document.addEventListener('click',e=>{const t=e.target.closest(this.SELECTORS.MEGA_TRIGGER);if(!t)return;const n=t.dataset.megamenuOpenId,s=document.querySelector(`.mega-menu-js-${n}-target`),o=t.classList.contains('clicked');o||this.closeAllStandardSubMenus(),this.closeOthers(this.SELECTORS.MEGA_TRIGGER,t,null),MenuUtils.setElementState(t,!o,'clicked'),s&&s.classList.toggle('hidden',o);const a=document.querySelector(this.SELECTORS.CLOSE_BTN);a&&a.classList.toggle('active',!o),this.updateHeaderBackground(),this.closeHamburgerMenu(),MenuUtils.updateNavigationHeights(),this.updateMenuStateCache()})},setupSubMenus:function(e,t=!1){document.addEventListener('click',n=>{const s=n.target.closest(e);if(!s)return;const o=s.classList.contains('clicked'),a=s.parentElement.querySelector(this.SELECTORS.SUBMENU);o||t||this.closeAllMegaMenus(),this.closeOthers(e,s,this.SELECTORS.SUBMENU,!t),MenuUtils.setElementState(s,!o,'clicked'),a&&a.classList.toggle('visible',!o),t||(document.querySelectorAll(this.SELECTORS.CLOSE_BTN).forEach(e=>{e.classList.toggle('active',!o)}),this.closeHamburgerMenu()),this.updateHeaderBackground(),this.updateMenuStateCache()})},isFocusInsideOpenMenu:function(e){if(!this.hasOpenMenus())return!1;let t=e;for(;t;){if(t.matches(this.SELECTORS.MEGA_MENU+'.visible, '+this.SELECTORS.MEGA_MENU+':not(.hidden)')||t.matches(this.SELECTORS.SUBMENU+'.visible'))return!0;t=t.parentElement}return!1},isMenuTrigger:function(e){return!!e.closest(this.SELECTORS.MENU_TRIGGER_ALL)},setupKeyboardHandlers:function(){document.addEventListener('keydown',e=>{if(this.pressedKeys.add(e.key),this.pressedKeys.has('p')&&this.pressedKeys.has('Escape')){const e=document.querySelector('.ham-activator-js');e&&e.focus(),this.closeHamburgerMenu()}'Escape'===e.key&&0===document.querySelectorAll('.paperplane-modal:not(.hidden)').length&&this.closeAllSubMenus()}),document.addEventListener('keyup',e=>{this.pressedKeys.delete(e.key)});const e=document.querySelector('#head-overlay a:last-of-type');e&&e.addEventListener('keydown',e=>{'Tab'!==e.key||e.shiftKey||this.closeAllSubMenus()})},setupMenuClosers:function(){document.addEventListener('click',e=>{e.target.matches(this.SELECTORS.CLOSE_BTN)&&this.closeAllSubMenus()}),document.addEventListener('focusin',e=>{if(!this.hasOpenMenus())return;const t=e.target;this.isMenuTrigger(t)?'mobile'===t.getAttribute('data-menu-type')||this.closeAllSubMenus():this.isFocusInsideOpenMenu(t)||this.closeAllDesktopMenus()},!0)},setupExpandButton:function(){document.addEventListener('click',e=>{if(e.target.closest('#expand-button-header-notice')){const e=document.querySelector('.avviso-container');e&&e.addEventListener('transitionend',()=>{MenuUtils.updateNavigationHeights()})}})},scrollDirectionMenu:function(){var e=window.scrollY;this.updateHeaderBackground(e),this.lastScrollTop=e,MenuUtils.updateNavigationHeights()},updateHeaderBackground:function(e){const t=document.getElementById('header');if(!t)return;const n=void 0!==e?e:window.scrollY,s=document.querySelector('.mega-menu-js-trigger.clicked')||document.querySelector('.header-menu-js > .menu-item-has-children > .sub-menu-btn.clicked')||document.querySelector('#hamburger-button.open');n>200||s?t.classList.add('backgrounded'):t.classList.remove('backgrounded')}};function scrollDirectionMenu(){MenuManager&&MenuManager.scrollDirectionMenu()}document.addEventListener('DOMContentLoaded',()=>{MenuManager.init()}),function(){'use strict';function e(e){const t=e.querySelector(".avviso-content");t&&requestAnimationFrame(()=>{const e=t.scrollWidth/100,n=Math.max(8,Math.min(e,60));t.style.animationDuration=n+'s'})}function t(e,t){const n=e.dataset.summaryText||'Leggi messaggio';'true'===e.dataset.converted&&function(e,t){e.innerHTML=t,e.dataset.converted='false'}(e,t),e.offsetHeight;const s=e.querySelector(".avviso-content");s&&function(e){const t=window.getComputedStyle(e);let n=parseFloat(t.lineHeight);(isNaN(n)||'normal'===t.lineHeight)&&(n=1.2*parseFloat(t.fontSize));const s=e.offsetHeight;return 0===n||0===s?1:Math.round(s/n)}(s)>1&&function(e,t,n){const s=t.innerHTML,o=document.createElement('div');o.className='expanding-block';const a=document.createElement('button');a.type='button',a.id='expand-button-header-notice',a.className='expander exp-open',a.setAttribute('aria-expanded','false'),a.setAttribute('data-expand-id','header-notice'),a.setAttribute('aria-controls','expand-content-header-notice');const i=document.createElement('span');i.textContent=n,a.appendChild(i);const c=document.createElement('div');c.role='region',c.id='expand-content-header-notice',c.setAttribute('aria-labelledby','expand-button-header-notice'),c.className='expandable-content';const u=document.createElement('div');u.className='inner';const r=document.createElement('div');r.className='content-styled last-child-no-margin';const l=document.createElement('a');l.name='expandable-content-header-notice',l.className='section-anchor',r.appendChild(l),r.innerHTML+=s,u.appendChild(r),c.appendChild(u),o.appendChild(a),o.appendChild(c);const d=e.querySelector('.close-header-notice');e.innerHTML='',e.appendChild(o),d&&e.appendChild(d),e.dataset.converted='true',function(e){e.addEventListener('mouseenter',()=>{const t=e.closest('.expanding-block');t&&t.classList.add('hovered')}),e.addEventListener('mouseleave',()=>{const t=e.closest('.expanding-block');t&&t.classList.remove('hovered')}),e.addEventListener('click',t=>{t.preventDefault();const n=e.dataset.expandId,s=document.getElementById(`expand-button-${n}`),o=document.getElementById(`expand-content-${n}`);s.classList.contains('exp-open')?(s.classList.remove('exp-open'),s.classList.add('exp-close'),s.setAttribute('aria-expanded','true'),o.classList.add('visible')):(s.classList.remove('exp-close'),s.classList.add('exp-open'),s.setAttribute('aria-expanded','false'),o.classList.remove('visible'))})}(a)}(e,s,n)}function n(){const e=document.querySelector('.close-header-notice-js');e&&e.addEventListener('click',(function(){const e=this.closest('.avviso-container');if(!e)return;const t=e.getAttribute('data-notice-id');if(!t)return;const n='header_notice_dismissed_'+t,s=new Date;s.setTime(s.getTime()+31536e6),document.cookie=n+'=1; expires='+s.toUTCString()+'; path=/; SameSite=Lax';const o=document.getElementById('pre-header');o&&(o.style.display='none')}))}function s(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...s)},t)}}function o(){const e=document.getElementById('pre-header');e&&requestAnimationFrame(()=>{e.classList.add('initialized')})}function a(){const a=document.querySelector(".avviso-container");if(!a)return;const i='true'===document.documentElement.getAttribute('data-reduced-motion');let c=a.getAttribute('data-view-mode')||'static-text';if(i&&'scroll-text'===c){c='static-text',a.classList.remove('avviso-scroll');const e=a.querySelector(".avviso-content");e&&(e.style.animationDuration='',e.style.animation='none')}if('scroll-text'===c){e(a);const t=s(()=>{e(a)},250);return window.addEventListener('resize',t),n(),void o()}if(!a.querySelector(".avviso-content"))return;const u=a.innerHTML;requestAnimationFrame(()=>{t(a,u),requestAnimationFrame(()=>{a.classList.add('visible'),o()})});const r=s(()=>{t(a,u)},250);window.addEventListener('resize',r),n()}'loading'===document.readyState?document.addEventListener('DOMContentLoaded',a):a()}();